<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>MT Animal Care ‚Äì Premium Products</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@300;400;500;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">

    <style>
        /* ============================================================
           DESIGN SYSTEM ‚Äî MT ANIMAL CARE PREMIUM
           Palette: Deep Crimson ¬∑ Burnished Gold ¬∑ Ivory ¬∑ Obsidian
        ============================================================ */
        :root {
            --crimson:       #7a0000;
            --crimson-deep:  #4d0000;
            --crimson-light: #b91c1c;
            --gold:          #c9972c;
            --gold-light:    #e8c060;
            --gold-pale:     #f9efc7;
            --ivory:         #fdf8f0;
            --ivory-dark:    #f5ede0;
            --obsidian:      #0d0d0d;
            --text-primary:  #1a0a00;
            --text-muted:    #6b5b4e;
            --white:         #ffffff;
            --border:        rgba(201,151,44,0.22);
            --shadow-gold:   0 8px 40px rgba(201,151,44,0.18);
            --shadow-dark:   0 12px 48px rgba(13,13,13,0.22);
            --radius-card:   20px;
            --radius-pill:   999px;
            --font-display:  'Playfair Display', serif;
            --font-serif:    'Cormorant Garamond', serif;
            --font-body:     'DM Sans', sans-serif;
            --nav-h:         72px;
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        html { scroll-behavior: smooth; overflow-x: hidden; }

        body {
            font-family: var(--font-body);
            background: var(--ivory);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* ===== CUSTOM SCROLLBAR ===== */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--ivory-dark); }
        ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 3px; }

        /* ============================================================
           NAVBAR
        ============================================================ */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 100;
            height: var(--nav-h);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 40px;
            background: rgba(253,248,240,0.95);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border-bottom: 1px solid var(--border);
        }

        /* subtle gold accent line on top */
        .navbar::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--crimson), var(--gold), var(--crimson));
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: inherit;
        }

        .brand-logo {
            height: 42px;
            width: 42px;
            border-radius: 10px;
            object-fit: cover;
            border: 2px solid var(--gold);
        }

        .brand-text {
            display: flex;
            flex-direction: column;
            line-height: 1.1;
        }

        .brand-text span:first-child {
            font-family: var(--font-display);
            font-size: 17px;
            font-weight: 700;
            color: var(--crimson);
            letter-spacing: 0.5px;
        }

        .brand-text span:last-child {
            font-size: 10px;
            font-weight: 500;
            color: var(--gold);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* Desktop nav links */
        .desktop-nav {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .desktop-nav a {
            position: relative;
            text-decoration: none;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            padding: 8px 14px;
            border-radius: 8px;
            transition: all 0.22s ease;
            letter-spacing: 0.2px;
        }

        .desktop-nav a:hover {
            color: var(--crimson);
            background: rgba(122,0,0,0.06);
        }

        .desktop-nav a.enquiry-link {
            background: linear-gradient(135deg, var(--crimson), var(--crimson-light));
            color: var(--white) !important;
            font-weight: 700;
            padding: 9px 20px;
            border-radius: var(--radius-pill);
            letter-spacing: 0.4px;
            box-shadow: 0 4px 16px rgba(122,0,0,0.30);
            transition: all 0.25s ease;
        }

        .desktop-nav a.enquiry-link:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 24px rgba(122,0,0,0.40);
        }

        /* Right actions */
        .right-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Search */
        .search-wrap {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-wrap input {
            font-family: var(--font-body);
            width: 200px;
            padding: 9px 38px 9px 14px;
            border-radius: var(--radius-pill);
            border: 1.5px solid var(--border);
            background: var(--white);
            font-size: 13px;
            color: var(--text-primary);
            outline: none;
            transition: border 0.2s, box-shadow 0.2s, width 0.3s;
        }

        .search-wrap input:focus {
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(201,151,44,0.12);
            width: 240px;
        }

        .search-wrap button {
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: var(--text-muted);
            padding: 0;
        }

        /* WhatsApp */
        .whatsapp-btn {
            width: 38px; height: 38px;
            border-radius: 50%;
            background: #25D366;
            display: flex; align-items: center; justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(37,211,102,0.35);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .whatsapp-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(37,211,102,0.45); }
        .whatsapp-icon { width: 20px; height: 20px; object-fit: contain; }

        /* Login */
        .login-btn {
            display: flex; align-items: center; gap: 6px;
            text-decoration: none;
            padding: 8px 18px;
            border-radius: var(--radius-pill);
            border: 1.5px solid var(--border);
            color: var(--text-primary);
            font-weight: 600;
            font-size: 13px;
            background: var(--white);
            transition: all 0.2s;
        }
        .login-btn:hover { border-color: var(--gold); background: var(--gold-pale); }

        /* User dropdown */
        .user-dropdown { position: relative; }
        .user-btn {
            display: flex; align-items: center; gap: 6px;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: var(--radius-pill);
            border: 1.5px solid var(--border);
            font-weight: 600;
            font-size: 13px;
            background: var(--white);
            transition: all 0.2s;
        }
        .user-btn:hover { border-color: var(--gold); }
        .dropdown-menu {
            display: none;
            position: absolute; right: 0; top: calc(100% + 8px);
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 12px;
            min-width: 150px;
            box-shadow: var(--shadow-dark);
            overflow: hidden;
        }
        .dropdown-menu a {
            display: block; padding: 11px 16px;
            text-decoration: none; color: var(--text-primary);
            font-size: 13px; font-weight: 500;
            transition: background 0.15s;
        }
        .dropdown-menu a:hover { background: var(--ivory-dark); color: var(--crimson); }

        /* Cart */
        .cart-btn {
            position: relative;
            width: 42px; height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--crimson), var(--crimson-light));
            color: var(--white);
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
            text-decoration: none;
            box-shadow: 0 4px 14px rgba(122,0,0,0.28);
            transition: transform 0.2s, box-shadow 0.2s;
            flex-shrink: 0;
        }
        .cart-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 22px rgba(122,0,0,0.38); }
        .cart-count {
            position: absolute; top: -5px; right: -5px;
            background: var(--gold); color: var(--obsidian);
            font-size: 10px; font-weight: 800;
            padding: 2px 6px; border-radius: var(--radius-pill);
            line-height: 1.4;
            border: 2px solid var(--ivory);
        }

        /* Hamburger */
        .hamburger {
            display: none;
            flex-direction: column; gap: 5px;
            cursor: pointer; padding: 6px; margin-left: auto;
        }
        .hamburger span {
            width: 24px; height: 2px;
            background: var(--crimson); border-radius: 2px;
            transition: 0.3s ease;
        }
        .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
        .hamburger.active span:nth-child(2) { opacity: 0; }
        .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

        /* Mobile overlay */
        .mobile-overlay {
            display: none; position: fixed; inset: 0;
            background: rgba(13,13,13,0.5); z-index: 998;
        }
        .mobile-overlay.active { display: block; }

        /* Mobile drawer */
        .mobile-menu {
            position: fixed; top: 0; left: -85%; width: 85%; max-width: 300px;
            height: 100vh; background: var(--ivory); z-index: 999;
            padding: 20px; display: flex; flex-direction: column; gap: 6px;
            box-shadow: 4px 0 32px rgba(0,0,0,0.25); transition: left 0.35s cubic-bezier(.4,0,.2,1);
        }
        .mobile-menu.active { left: 0; }
        .mobile-menu-header {
            display: flex; align-items: center; justify-content: space-between;
            padding-bottom: 16px; border-bottom: 1px solid var(--border); margin-bottom: 10px;
        }
        .mobile-menu a {
            padding: 13px 16px; text-decoration: none;
            color: var(--crimson); font-size: 15px; font-weight: 600;
            border-radius: 10px; transition: all 0.2s;
            border: 1px solid transparent;
        }
        .mobile-menu a:hover {
            background: var(--gold-pale); border-color: var(--border);
            padding-left: 22px;
        }
        .close-menu { font-size: 22px; cursor: pointer; color: var(--text-muted); }

        /* ============================================================
           HERO SECTION
        ============================================================ */
        .hero-section {
            position: relative; width: 100%;
            min-height: 68vh; max-height: 82vh;
            overflow: hidden; background: var(--obsidian);
        }

        .hero-image {
            width: 100%; height: 100%;
            object-fit: cover; object-position: center; display: block;
            opacity: 0.7;
            transform: scale(1.03);
            transition: transform 6s ease;
        }

        .hero-section:hover .hero-image { transform: scale(1); }

        .hero-section::after {
            content: '';
            position: absolute; inset: 0;
            background: linear-gradient(
                    105deg,
                    rgba(13,13,13,0.85) 0%,
                    rgba(77,0,0,0.65) 40%,
                    rgba(13,13,13,0.15) 100%
            );
            z-index: 1;
        }

        /* Decorative grain overlay */
        .hero-section::before {
            content: '';
            position: absolute; inset: 0; z-index: 2;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
            opacity: 0.4;
            pointer-events: none;
        }

        .hero-overlay {
            position: absolute; bottom: 60px; left: 60px;
            z-index: 3; color: var(--white); max-width: 540px;
        }

        .hero-eyebrow {
            display: inline-flex; align-items: center; gap: 8px;
            font-size: 11px; font-weight: 700; letter-spacing: 3px;
            text-transform: uppercase; color: var(--gold-light);
            margin-bottom: 16px;
        }

        .hero-eyebrow::before {
            content: ''; width: 32px; height: 1px; background: var(--gold-light);
        }

        .hero-overlay h1 {
            font-family: var(--font-display);
            font-size: clamp(32px, 4.5vw, 54px);
            line-height: 1.08;
            font-weight: 900;
            margin-bottom: 16px;
            color: var(--white);
        }

        .hero-overlay h1 em {
            font-style: italic;
            color: var(--gold-light);
        }

        .hero-overlay p {
            font-size: 15px; line-height: 1.65;
            opacity: 0.82; margin-bottom: 28px;
            font-weight: 300;
        }

        .hero-btn {
            display: inline-flex; align-items: center; gap: 10px;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: var(--obsidian);
            text-decoration: none; border-radius: 10px;
            font-weight: 800; font-size: 14px; letter-spacing: 0.3px;
            box-shadow: 0 8px 28px rgba(0,0,0,0.50), 0 0 0 1px rgba(255,255,255,0.15) inset;
            transition: all 0.25s ease;
        }
        .hero-btn:hover { transform: translateY(-3px); box-shadow: 0 16px 40px rgba(0,0,0,0.60); }

        /* ============================================================
           WHY US STRIP
        ============================================================ */
        .why-choose-us {
            padding: 56px 40px;
            background: linear-gradient(160deg, var(--crimson-deep) 0%, var(--crimson) 55%, #8b4a00 100%);
            position: relative; overflow: hidden;
        }

        .why-choose-us::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .why-choose-us h2 {
            font-family: var(--font-display);
            font-size: 36px; font-weight: 700;
            color: var(--gold-light); text-align: center;
            margin-bottom: 36px; letter-spacing: 1px;
            position: relative;
        }

        .why-choose-us h2::after {
            content: ''; display: block;
            width: 64px; height: 3px;
            background: linear-gradient(90deg, var(--gold), transparent);
            margin: 12px auto 0;
            border-radius: 2px;
        }

        .why-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px; max-width: 1000px; margin: 0 auto;
            position: relative;
        }

        .why-card {
            background: rgba(255,255,255,0.06);
            padding: 20px 22px;
            border-radius: 14px;
            border: 1px solid rgba(201,151,44,0.3);
            color: var(--ivory);
            font-weight: 500; font-size: 14px;
            backdrop-filter: blur(4px);
            transition: all 0.25s ease;
            display: flex; align-items: center; gap: 12px;
        }

        .why-card::before {
            content: '‚ú¶'; color: var(--gold-light);
            font-size: 12px; flex-shrink: 0;
        }

        .why-card:hover {
            background: rgba(255,255,255,0.11);
            border-color: rgba(201,151,44,0.65);
            transform: translateY(-4px);
        }

        /* ============================================================
           PAGE / PRODUCTS SECTION
        ============================================================ */
        .page {
            padding: 56px 40px 72px;
            background: var(--ivory);
        }

        .section-header {
            display: flex; align-items: flex-end;
            justify-content: space-between;
            margin-bottom: 40px; flex-wrap: wrap; gap: 16px;
        }

        .section-header-left {}

        .section-eyebrow {
            font-size: 11px; font-weight: 700; letter-spacing: 3px;
            text-transform: uppercase; color: var(--gold);
            display: flex; align-items: center; gap: 8px; margin-bottom: 8px;
        }
        .section-eyebrow::before {
            content: ''; width: 24px; height: 1.5px; background: var(--gold);
        }

        .page h1 {
            font-family: var(--font-display);
            font-size: clamp(28px, 3vw, 42px);
            font-weight: 900;
            color: var(--crimson);
            line-height: 1.1;
        }

        /* Empty */
        .empty-state {
            text-align: center; padding: 80px 20px;
            color: var(--text-muted); font-size: 18px; font-weight: 600;
        }

        /* ============================================================
           PRODUCT GRID + CARDS
        ============================================================ */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
            gap: 28px;
        }

        .product-card {
            border-radius: var(--radius-card);
            background: var(--white);
            border: 1px solid var(--border);
            overflow: hidden;
            display: flex; flex-direction: column;
            box-shadow: 0 2px 16px rgba(122,0,0,0.06);
            transition: transform 0.28s cubic-bezier(.22,1,.36,1), box-shadow 0.28s ease;
            position: relative;
        }

        .product-card::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--crimson), var(--gold));
            opacity: 0; transition: opacity 0.25s;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 24px 60px rgba(122,0,0,0.14), 0 8px 20px rgba(0,0,0,0.08);
        }

        .product-card:hover::before { opacity: 1; }

        /* Image container */
        .card-img-wrap {
            width: 100%; height: 200px;
            background: var(--ivory-dark);
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; position: relative;
        }

        .card-img-wrap img {
            width: 100%; height: 100%;
            object-fit: contain; padding: 16px;
            transition: transform 0.4s ease;
        }

        .product-card:hover .card-img-wrap img { transform: scale(1.06); }

        /* Card body */
        .card-body {
            padding: 20px 20px 18px;
            display: flex; flex-direction: column; flex: 1; gap: 6px;
        }

        .product-card h3 {
            font-family: var(--font-display);
            font-size: 18px; font-weight: 700;
            color: var(--crimson);
            letter-spacing: 0.3px; line-height: 1.2;
            text-transform: uppercase;
        }

        .product-card p {
            font-size: 13px; line-height: 1.6;
            color: var(--text-muted); flex: 1;
        }

        /* Price row */
        .price-row {
            display: flex; align-items: center; justify-content: space-between;
            margin-top: 10px;
        }

        .price {
            font-family: var(--font-serif);
            font-size: 22px; font-weight: 700;
            color: var(--crimson);
        }

        .stock {
            font-size: 11px; font-weight: 700; letter-spacing: 1px;
            text-transform: uppercase;
            padding: 4px 10px; border-radius: var(--radius-pill);
            background: rgba(21,128,61,0.1); color: #166534;
            border: 1px solid rgba(21,128,61,0.2);
        }
        .stock.out { background: rgba(153,27,27,0.08); color: #991b1b; border-color: rgba(153,27,27,0.2); }

        /* Qty controls */
        .qty-controls {
            display: flex; align-items: center; justify-content: center;
            gap: 16px; margin-top: 14px;
            padding: 12px 16px; border-radius: 12px;
            background: var(--ivory-dark);
            border: 1px solid var(--border);
        }

        .qty-btn {
            width: 36px; height: 36px; border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: var(--obsidian);
            font-size: 18px; font-weight: 900; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 3px 10px rgba(201,151,44,0.35);
            transition: transform 0.18s, box-shadow 0.18s;
            line-height: 1;
        }
        .qty-btn:hover { transform: scale(1.15); box-shadow: 0 6px 18px rgba(201,151,44,0.55); }
        .qty-btn:active { transform: scale(0.95); }

        .qty-value {
            min-width: 30px; text-align: center;
            font-weight: 800; font-size: 18px;
            color: var(--text-primary);
        }

        /* Know More btn */
        .know-more-btn {
            display: block;
            margin-top: 12px;
            padding: 11px 0;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--crimson), var(--crimson-light));
            color: var(--white);
            font-weight: 700; font-size: 13px;
            text-decoration: none; text-align: center;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 16px rgba(122,0,0,0.25);
            transition: all 0.22s ease;
        }
        .know-more-btn:hover {
            background: linear-gradient(135deg, var(--crimson-deep), var(--crimson));
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(122,0,0,0.35);
        }

        .product-card.dim {
            opacity: 0.3;
            filter: saturate(0.2);
            transform: none !important;
        }

        /* ============================================================
           KNOW MORE MODAL
        ============================================================ */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(13,13,13,0.8);
            display: none; justify-content: center; align-items: center;
            z-index: 9999;
            backdrop-filter: blur(6px);
        }
        .modal-overlay.active { display: flex; }
        .modal-box {
            background: var(--white);
            padding: 8px; border-radius: 20px;
            box-shadow: 0 32px 80px rgba(0,0,0,0.5);
            max-width: 92%; max-height: 90%;
            position: relative;
            border: 3px solid var(--gold);
            animation: modalIn 0.3s cubic-bezier(.22,1,.36,1);
        }
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.92) translateY(20px); }
            to   { opacity: 1; transform: scale(1) translateY(0); }
        }
        .modal-box img {
            max-width: 100%; max-height: 72vh;
            border-radius: 14px; display: block;
        }
        .close-btn {
            position: absolute; top: -14px; right: -14px;
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--crimson); color: var(--white);
            display: flex; align-items: center; justify-content: center;
            font-size: 16px; cursor: pointer;
            box-shadow: 0 4px 14px rgba(0,0,0,0.35);
        }
        .close-btn:hover { background: var(--crimson-deep); }

        /* ============================================================
           HIGHLIGHT
        ============================================================ */
        .highlight {
            background: var(--gold); color: var(--crimson-deep);
            padding: 1px 4px; border-radius: 4px;
            font-weight: 700;
        }

        /* ============================================================
           ABOUT SECTION
        ============================================================ */
        .about-section {
            margin: 0; padding: 80px 40px;
            background: linear-gradient(160deg, var(--crimson-deep) 0%, var(--crimson) 60%, #7a4500 100%);
            color: var(--white); text-align: center;
            position: relative; overflow: hidden;
        }

        .about-section::before {
            content: '';
            position: absolute; top: -100px; right: -100px;
            width: 400px; height: 400px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(201,151,44,0.15), transparent 70%);
            pointer-events: none;
        }

        .about-inner { max-width: 820px; margin: 0 auto; position: relative; }

        .about-section h2 {
            font-family: var(--font-display);
            font-size: 38px; font-weight: 700;
            color: var(--gold-light); margin-bottom: 28px;
            letter-spacing: 0.5px;
        }

        .about-section h2::after {
            content: ''; display: block;
            width: 50px; height: 3px;
            background: var(--gold-light);
            margin: 14px auto 0; border-radius: 2px;
        }

        .about-section p {
            font-size: 16px; line-height: 1.9;
            color: rgba(255,255,255,0.88); text-align: justify;
            font-weight: 300;
        }

        /* ============================================================
           CONTACT SECTION
        ============================================================ */
        .contact-section {
            padding: 80px 40px;
            background: var(--ivory-dark);
            text-align: center;
        }

        .contact-section h2 {
            font-family: var(--font-display);
            font-size: 38px; font-weight: 700;
            color: var(--crimson); margin-bottom: 40px;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 24px; max-width: 1000px; margin: 0 auto;
        }

        .contact-card {
            background: var(--white);
            padding: 32px 28px;
            border-radius: 16px;
            border: 1.5px solid var(--border);
            box-shadow: 0 4px 20px rgba(122,0,0,0.06);
            text-align: left;
            transition: transform 0.25s, box-shadow 0.25s;
        }
        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 16px 40px rgba(122,0,0,0.12);
        }

        .contact-card h3 {
            font-family: var(--font-display);
            font-size: 18px; font-weight: 700;
            color: var(--crimson); margin-bottom: 14px;
        }

        .contact-card h3::after {
            content: ''; display: block;
            width: 32px; height: 2px;
            background: var(--gold); margin-top: 8px; border-radius: 1px;
        }

        .contact-card p {
            font-size: 14px; line-height: 1.9;
            color: var(--text-muted);
        }

        /* ============================================================
           CHATBOT
        ============================================================ */
        #ai-chatbot {
            position: fixed; bottom: 24px; right: 24px;
            width: 330px;
            background: var(--white);
            border-radius: 18px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.20), 0 0 0 1px var(--border);
            overflow: hidden; z-index: 9999;
            font-family: var(--font-body);
        }

        #ai-header {
            background: linear-gradient(135deg, var(--crimson-deep), var(--crimson), var(--gold));
            color: var(--white); padding: 14px 16px;
            font-weight: 700; font-size: 14px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: move; user-select: none;
        }

        #ai-header span:last-child {
            opacity: 0.7; cursor: pointer; font-size: 18px;
            transition: opacity 0.2s;
        }
        #ai-header span:last-child:hover { opacity: 1; }

        #ai-body {
            height: 240px; padding: 14px;
            overflow-y: auto; font-size: 13px;
            background: var(--ivory);
        }

        .msg-user {
            margin: 8px 0; text-align: right;
        }
        .msg-user b { color: var(--crimson); }

        .msg-ai {
            margin: 8px 0; text-align: left;
        }
        .msg-ai b { color: var(--gold); }

        .typing { font-style: italic; color: var(--text-muted); font-size: 12px; }

        #ai-input {
            width: 100%; border: none;
            border-top: 1px solid var(--border);
            padding: 12px 14px; outline: none;
            font-family: var(--font-body); font-size: 13px;
            color: var(--text-primary); background: var(--white);
        }
        #ai-input::placeholder { color: var(--text-muted); }

        /* ============================================================
           ENQUIRY MODAL
        ============================================================ */
        .enquiry-modal {
            display: none; position: fixed; inset: 0;
            background: rgba(13,13,13,0.78);
            z-index: 99999; justify-content: center; align-items: center;
            backdrop-filter: blur(6px);
        }
        .enquiry-modal.show { display: flex; }

        .enquiry-box {
            background: var(--white);
            padding: 36px 32px;
            border-radius: 20px;
            width: 90%; max-width: 440px;
            max-height: 90vh; overflow-y: auto;
            color: var(--text-primary);
            box-shadow: 0 32px 80px rgba(0,0,0,0.4);
            position: relative;
            border: 2px solid var(--border);
            animation: modalIn 0.3s cubic-bezier(.22,1,.36,1);
        }

        .enquiry-box::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0;
            height: 4px; border-radius: 20px 20px 0 0;
            background: linear-gradient(90deg, var(--crimson), var(--gold));
        }

        .enquiry-box h2 {
            font-family: var(--font-display);
            font-size: 26px; font-weight: 700;
            color: var(--crimson); margin-bottom: 8px;
        }

        .enquiry-box p {
            font-size: 13px; color: var(--text-muted);
            margin-bottom: 20px; line-height: 1.6;
        }

        .enquiry-box label {
            display: block; margin-top: 14px;
            font-weight: 600; font-size: 12px;
            letter-spacing: 0.5px; text-transform: uppercase;
            color: var(--text-muted); margin-bottom: 5px;
        }

        .enquiry-box input,
        .enquiry-box select,
        .enquiry-box textarea {
            width: 100%; padding: 10px 12px;
            border-radius: 10px;
            border: 1.5px solid var(--border);
            background: var(--ivory); font-size: 13px;
            font-family: var(--font-body); color: var(--text-primary);
            outline: none; transition: border 0.2s, box-shadow 0.2s;
        }
        .enquiry-box input:focus,
        .enquiry-box select:focus,
        .enquiry-box textarea:focus {
            border-color: var(--gold); box-shadow: 0 0 0 3px rgba(201,151,44,0.12);
        }
        .enquiry-box textarea { min-height: 80px; resize: vertical; }

        .enquiry-box button {
            width: 100%; margin-top: 22px; padding: 13px;
            border-radius: 12px; border: none;
            background: linear-gradient(135deg, var(--crimson), var(--crimson-light));
            color: var(--white); font-weight: 800; font-size: 14px;
            cursor: pointer; letter-spacing: 0.5px;
            box-shadow: 0 6px 20px rgba(122,0,0,0.30);
            transition: all 0.22s;
        }
        .enquiry-box button:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(122,0,0,0.40); }

        .enquiry-box .close-btn {
            position: absolute; right: 16px; top: 16px;
            width: 30px; height: 30px; border-radius: 50%;
            background: var(--ivory-dark);
            display: flex; align-items: center; justify-content: center;
            font-size: 16px; cursor: pointer; color: var(--text-muted);
            transition: background 0.2s;
        }
        .enquiry-box .close-btn:hover { background: var(--ivory); color: var(--crimson); }

        /* ============================================================
           FLOATING CALL BUTTON
        ============================================================ */
        #talkExpertFloat {
            position: fixed;
            top: calc(var(--nav-h) + 16px);   /* always snug below navbar */
            right: 20px;
            z-index: 90;                        /* below modals/chatbot but above content */
            background: linear-gradient(135deg, #16a34a, #22c55e);
            color: var(--white); text-decoration: none;
            padding: 11px 18px; border-radius: var(--radius-pill);
            font-weight: 700; font-size: 13px; letter-spacing: 0.3px;
            display: inline-flex; align-items: center; gap: 8px;
            box-shadow: 0 8px 24px rgba(22,163,74,0.35);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            animation: expertPulse 2.5s infinite;
        }
        #talkExpertFloat:hover { transform: translateY(-2px); box-shadow: 0 14px 32px rgba(22,163,74,0.50); }

        @keyframes expertPulse {
            0%   { box-shadow: 0 8px 24px rgba(22,163,74,0.35), 0 0 0 0 rgba(34,197,94,0.5); }
            70%  { box-shadow: 0 10px 30px rgba(22,163,74,0.45), 0 0 0 12px rgba(34,197,94,0); }
            100% { box-shadow: 0 8px 24px rgba(22,163,74,0.35), 0 0 0 0 rgba(34,197,94,0); }
        }

        /* ============================================================
           RESPONSIVE
        ============================================================ */
        @media (max-width: 900px) {
            .desktop-nav { display: none; }
            .hamburger { display: flex; }
        }

        @media (max-width: 768px) {
            :root { --nav-h: 58px; }

            /* ‚îÄ‚îÄ Navbar: single tight row ‚îÄ‚îÄ */
            .navbar {
                padding: 0 12px;
                height: var(--nav-h);
                flex-wrap: nowrap;
                gap: 8px;
            }

            /* Logo: smaller, no wrap */
            .brand { flex-shrink: 0; gap: 8px; }
            .brand-logo { height: 34px; width: 34px; }
            .brand-text span:first-child { font-size: 13px; }
            .brand-text span:last-child { display: none; } /* hide "PREMIUM VETERINARY" on mobile */

            /* Hamburger right after brand */
            .hamburger { margin-left: 0; flex-shrink: 0; }

            /* Right actions: compact, no wrap */
            .right-actions {
                flex: 1;
                display: flex;
                align-items: center;
                justify-content: flex-end;
                gap: 6px;
                flex-wrap: nowrap;
                overflow: hidden;
            }

            /* Hide search on mobile to save space */
            .search-wrap { display: none; }

            /* Smaller action buttons */
            .whatsapp-btn { width: 32px; height: 32px; flex-shrink: 0; }
            .whatsapp-icon { width: 16px; height: 16px; }

            .login-btn {
                padding: 6px 10px;
                font-size: 11px;
                white-space: nowrap;
                max-width: 120px;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            /* Truncate long usernames */
            .user-btn {
                padding: 6px 10px;
                font-size: 11px;
                max-width: 130px;
                overflow: hidden;
                white-space: nowrap;
            }
            .user-btn span[sec\:authentication] {
                max-width: 70px;
                overflow: hidden;
                text-overflow: ellipsis;
                display: inline-block;
            }

            .cart-btn { width: 34px; height: 34px; font-size: 16px; flex-shrink: 0; }

            /* Hero */
            .hero-section { min-height: 45vh; max-height: 60vh; }
            .hero-overlay { left: 20px; right: 20px; bottom: 20px; }

            /* Sections */
            .why-choose-us { padding: 40px 20px; }
            .why-choose-us h2 { font-size: 24px; }
            .why-grid { grid-template-columns: 1fr; }
            .page { padding: 36px 20px 56px; }
            .about-section { padding: 56px 20px; }
            .contact-section { padding: 56px 20px; }

            /* Products */
            .product-grid { grid-template-columns: repeat(2, 1fr); gap: 14px; }
            .product-card h3 { font-size: 14px; }
            .card-img-wrap { height: 140px; }
            .price { font-size: 16px; }

            /* Chatbot */
            #ai-chatbot { width: 92%; right: 4%; bottom: 24px; }
            #ai-body { height: 150px; }

            /* Expert button */
            #talkExpertFloat {
                top: calc(var(--nav-h) + 12px);
                right: 10px;
                padding: 9px 14px;
                font-size: 11px;
            }
        }

        @media (max-width: 420px) {
            .product-grid { grid-template-columns: 1fr; }
            /* On very small screens, truncate username more aggressively */
            .user-btn span { max-width: 50px; }
        }

        @media (max-width: 420px) {
            .product-grid { grid-template-columns: 1fr; }
        }

        /* Mobile search inside drawer */
        .mobile-search-wrap {
            display: flex; align-items: center; gap: 8px;
            background: var(--ivory-dark);
            border: 1.5px solid var(--border);
            border-radius: 10px;
            padding: 8px 12px;
            margin-bottom: 4px;
        }
        .mobile-search-icon { font-size: 14px; flex-shrink: 0; }
        .mobile-search-wrap input {
            border: none; background: none; outline: none;
            font-family: var(--font-body); font-size: 14px;
            color: var(--text-primary); width: 100%;
        }
        .mobile-search-wrap input::placeholder { color: var(--text-muted); }

        /* ============================================================
           IMAGE MODAL (legacy from original ‚Äî kept for compat)
        ============================================================ */
        .image-modal {
            display: none; position: fixed; inset: 0;
            background: rgba(0,0,0,0.88); z-index: 9999;
            align-items: center; justify-content: center;
        }
        .image-modal img {
            max-width: 85%; max-height: 85%;
            border-radius: 14px; box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            background: var(--white); padding: 10px;
        }
        .image-modal .close {
            position: absolute; top: 20px; right: 30px;
            font-size: 36px; color: var(--white); cursor: pointer; font-weight: bold;
        }

    </style>

    <!-- ============================================================
         ALL ORIGINAL JS ‚Äî UNCHANGED
    ============================================================ -->
    <script>
        function updateQty(productId, action) {
            fetch(`/cart/${action}/${productId}`, { method: 'POST' })
                .then(res => {
                    if (res.redirected || res.status === 401 || res.status === 403) {
                        window.location.href = "/login";
                        return null;
                    }
                    if (!res.ok) throw new Error("Network response was not ok");
                    return res.text();
                })
                .then(qty => {
                    if (!qty) return;
                    qty = parseInt(qty);
                    if (isNaN(qty)) return;
                    const qtyEl = document.getElementById(`qty-${productId}`);
                    if (qtyEl) qtyEl.innerText = qty;
                    const badge = document.getElementById("cartCountBadge");
                    let currentCount = badge ? parseInt(badge.innerText || "0") : 0;
                    if (action === "increase") currentCount += 1;
                    else if (action === "decrease" && currentCount > 0) currentCount -= 1;
                    if (badge) {
                        if (currentCount <= 0) { badge.style.display = "none"; }
                        else { badge.style.display = "inline-block"; badge.innerText = currentCount; }
                    }
                })
                .catch(err => { console.error("Cart update failed:", err); alert("‚ö†Ô∏è Cart update failed. Check console."); });
        }

        function openDetailImage(url) {
            const modal = document.getElementById("imageModal");
            const img = document.getElementById("modalImg");
            img.src = url;
            modal.style.display = "flex";
        }

        function closeModal() {
            document.getElementById("imageModal").style.display = "none";
        }
    </script>
</head>

<body>

<!-- ============================================================
     NAVBAR
============================================================ -->
<nav class="navbar">
    <a href="/products" class="brand">
        <img src="/images/mt-animal-care-logo.jpeg" class="brand-logo" alt="MT Animal Care">
        <div class="brand-text">
            <span>MT Animal Care</span>
            <span>Premium Veterinary</span>
        </div>
    </a>

    <div class="desktop-nav">
        <a href="/">Home</a>
        <a href="#shop">Shop</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
        <a href="javascript:void(0)" class="enquiry-link" onclick="openEnquiryModal()">Enquiry</a>
        <a th:if="${#authentication.authenticated}" href="/my-orders">My Orders</a>
    </div>

    <div class="hamburger" id="hamburgerBtn" onclick="toggleMenu()">
        <span></span><span></span><span></span>
    </div>

    <div class="mobile-overlay" id="mobileOverlay" onclick="toggleMenu()"></div>

    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <div class="brand">
                <img src="/images/mt-animal-care-logo.jpeg" class="brand-logo" alt="MT Animal Care">
                <div class="brand-text">
                    <span>MT Animal Care</span>
                </div>
            </div>
            <span class="close-menu" onclick="toggleMenu()">‚úñ</span>
        </div>

        <!-- Search bar inside drawer -->
        <div class="mobile-search-wrap">
            <span class="mobile-search-icon">üîç</span>
            <input type="text"
                   id="liveSearchMobile"
                   placeholder="Search products‚Ä¶"
                   oninput="liveSearchProducts(this.value); document.getElementById('liveSearch').value=this.value;"
            />
        </div>

        <a href="/">Home</a>
        <a href="#shop" onclick="toggleMenu()">Shop</a>
        <a href="#about" onclick="toggleMenu()">About</a>
        <a href="#contact" onclick="toggleMenu()">Contact</a>
        <a href="javascript:void(0)" onclick="closeMenuAndEnquiry()">Enquiry</a>
        <a th:if="${#authentication.authenticated}" href="/my-orders">My Orders</a>
    </div>

    <div class="right-actions">
        <div class="search-wrap">
            <input type="text"
                   id="liveSearch"
                   placeholder="Search products‚Ä¶"
                   oninput="liveSearchProducts(this.value)"/>
            <button type="button" onclick="alert('Live search is enabled. Just start typing! üîç')">üîç</button>
        </div>

        <a href="https://wa.me/919021466362" target="_blank" class="whatsapp-btn" title="Chat on WhatsApp">
            <img src="/images/whatsapp.png" alt="WhatsApp" class="whatsapp-icon">
        </a>

        <a sec:authorize="!isAuthenticated()" href="/oauth2/authorization/google" class="login-btn">
            üîê Login
        </a>

        <div class="user-dropdown" sec:authorize="isAuthenticated()">
            <div class="user-btn" onclick="toggleUserMenu()">
                üë§ <span sec:authentication="name"></span> ‚åÑ
            </div>
            <div class="dropdown-menu" id="userMenu">
                <a href="/logout">Logout</a>
            </div>
        </div>

        <a href="/cart" class="cart-btn" title="Cart">
            üõí
            <span class="cart-count"
                  id="cartCountBadge"
                  th:if="${cartCount > 0}"
                  th:text="${cartCount}"></span>
        </a>
    </div>
</nav>

<!-- ============================================================
     HERO
============================================================ -->
<section class="hero-section">
    <img src="/images/home-banner.png" alt="MT Animal Care Banner" class="hero-image">
    <div class="hero-overlay">
        <div class="hero-eyebrow">WHO ¬∑ GMP ¬∑ ISO Certified</div>
        <h1>Leading Name in<br><em>Contract Manufacturing</em></h1>
        <p>Premium veterinary formulations for poultry, livestock & animal healthcare. Global export-ready facility.</p>
        <a href="/pdf/mt-animal-care-brochure.pdf" target="_blank" class="hero-btn">
            üìÑ Download Brochure
        </a>
    </div>
</section>

<!-- ============================================================
     WHY CHOOSE US
============================================================ -->
<section class="why-choose-us" id="why-us">
    <h2>Why Choose MT Animal Care?</h2>
    <div class="why-grid">
        <div class="why-card">WHO-GMP Certified Facility</div>
        <div class="why-card">Custom Formulation for Poultry &amp; Livestock</div>
        <div class="why-card">Bulk Manufacturing &amp; Export Support</div>
        <div class="why-card">Experienced Veterinary Team</div>
    </div>

    <!-- ============================================================
         PRODUCTS
    ============================================================ -->
    <div class="page" id="shop">
        <div class="section-header">
            <div class="section-header-left">
                <div class="section-eyebrow">Our Collection</div>
                <h1 th:if="${searchQuery != null}">
                    Results for "<span th:text="${searchQuery}"></span>"
                </h1>
                <h1 th:if="${searchQuery == null}">Available Products</h1>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(products)}" class="empty-state">
            ‚ùå No products found.
        </div>

        <div class="product-grid" th:if="${!#lists.isEmpty(products)}">
            <div class="product-card"
                 th:each="product : ${products}"
                 th:attr="data-name=${product.name}, data-desc=${product.description}">

                <div class="card-img-wrap">
                    <img th:src="${product.imageUrl}"
                         alt="Product Image"
                         onerror="this.src='/images/no-image.png'">
                </div>

                <div class="card-body">
                    <h3 class="product-name" th:text="${product.name}"></h3>
                    <p class="product-desc" th:text="${product.description}"></p>

                    <div class="price-row">
                        <div class="price">‚Çπ <span th:text="${product.price}"></span></div>
                        <div class="stock"
                             th:classappend="${product.stock > 0 ? '' : 'out'}"
                             th:text="${product.stock > 0 ? 'In Stock' : 'Out of Stock'}">
                        </div>
                    </div>

                    <div class="qty-controls">
                        <button type="button" class="qty-btn"
                                th:attr="onclick=|updateQty(${product.id}, 'decrease')|">‚àí</button>
                        <span class="qty-value"
                              th:id="'qty-' + ${product.id}"
                              th:text="${cart[product.id] != null ? cart[product.id] : 0}">0</span>
                        <button type="button" class="qty-btn"
                                th:attr="onclick=|updateQty(${product.id}, 'increase')|">+</button>
                    </div>

                    <a href="javascript:void(0)"
                       class="know-more-btn"
                       th:attr="data-img=${product.knowMoreImageUrl}"
                       onclick="openKnowMoreFromBtn(this)">
                        üîç Know More
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         KNOW MORE MODAL
    ============================================================ -->
    <div id="knowMoreModal" class="modal-overlay">
        <div class="modal-box">
            <span class="close-btn" onclick="closeKnowMore()">‚úñ</span>
            <img id="knowMoreImg" src="" alt="Know More Image"/>
        </div>
    </div>

    <!-- ============================================================
         ABOUT
    ============================================================ -->
    <section id="about" class="about-section">
        <div class="about-inner">
            <h2>About Our Manufacturing Unit</h2>
            <p>
                We are a quality-driven manufacturing unit specializing in poultry nutrition, veterinary medicines,
                and animal healthcare products designed to enhance growth, immunity, and overall farm productivity.
                Our facility follows strict industrial standards, modern production processes, and quality control systems
                to ensure every product meets safety, performance, and regulatory requirements. From poultry feed supplements
                and disease-prevention formulations to healthcare solutions for other livestock and animals, we are committed
                to delivering reliable, effective, and scientifically developed products that support farmers, integrators,
                and veterinary professionals across the industry. Our focus on innovation, hygiene, and consistency helps
                build healthier flocks and sustainable farming outcomes.
            </p>
        </div>
    </section>

    <!-- ============================================================
         CONTACT
    ============================================================ -->
    <section id="contact" class="contact-section">
        <h2>Contact Us</h2>
        <div class="contact-grid">
            <div class="contact-card">
                <h3>Registered Address</h3>
                <p>
                    B/201, Mauli Apartment 3, Manvel Pada Road,<br>
                    Nearby Landmark: Jaydeep English Primary School,<br>
                    Kargil Nagar, Vasai Virar, District: Palghar,<br>
                    Maharashtra ‚Äì 401305
                </p>
            </div>
            <div class="contact-card">
                <h3>Contact</h3>
                <p>
                    üìû 9503569405<br>
                    üìû 97734 05980<br><br>
                    ‚úâÔ∏è <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fc91889d9295919d9094999d9088949f9d8e99bc9b919d9590d29f9391">[email&#160;protected]</a>
                </p>
            </div>
            <div class="contact-card">
                <h3>Registrations</h3>
                <p>
                    MSME: UDYAM-MH-19-0395860<br>
                    GST: 27ACFFM7590J1ZN
                </p>
            </div>
        </div>
    </section>

    <!-- ============================================================
         ALL SCRIPTS ‚Äî LOGIC UNCHANGED
    ============================================================ -->
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    /* Know More Modal */
    function openKnowMoreFromBtn(btn) {
        const imgUrl = btn.getAttribute("data-img");
        document.getElementById("knowMoreImg").src = imgUrl;
        document.getElementById("knowMoreModal").style.display = "flex";
    }
    function closeKnowMore() {
        document.getElementById("knowMoreModal").style.display = "none";
    }

    /* Live Search */
    function liveSearchProducts(query) {
        query = query.toLowerCase().trim();
        const cards = document.querySelectorAll(".product-card");
        let firstMatch = null;
        cards.forEach(card => {
            const nameEl = card.querySelector(".product-name");
            const descEl = card.querySelector(".product-desc");
            const name = nameEl.innerText.toLowerCase();
            const desc = descEl.innerText.toLowerCase();
            nameEl.innerHTML = nameEl.innerText;
            descEl.innerHTML = descEl.innerText;
            if (!query) { card.classList.remove("dim"); return; }
            if (name.includes(query) || desc.includes(query)) {
                card.classList.remove("dim");
                highlightText(nameEl, query);
                highlightText(descEl, query);
                if (!firstMatch) firstMatch = card;
            } else {
                card.classList.add("dim");
            }
        });
        if (firstMatch) firstMatch.scrollIntoView({ behavior: "smooth", block: "center" });
    }
    function highlightText(element, query) {
        const text = element.innerText;
        const regex = new RegExp(`(${query})`, "ig");
        element.innerHTML = text.replace(regex, `<span class="highlight">$1</span>`);
    }

    /* User Dropdown */
    function toggleUserMenu() {
        const menu = document.getElementById("userMenu");
        menu.style.display = (menu.style.display === "block") ? "none" : "block";
    }
    document.getElementById("userMenu")?.addEventListener("click", function(e) { e.stopPropagation(); });
    document.addEventListener("click", function(e) {
        const dropdown = document.querySelector(".user-dropdown");
        const menu = document.getElementById("userMenu");
        if (dropdown && menu && !dropdown.contains(e.target)) menu.style.display = "none";
    });

    /* Mobile Menu */
    function toggleMenu() {
        document.getElementById("mobileMenu").classList.toggle("active");
        document.getElementById("mobileOverlay").classList.toggle("active");
        document.getElementById("hamburgerBtn").classList.toggle("active");
    }

    /* Close menu then open enquiry */
    function closeMenuAndEnquiry() {
        document.getElementById("mobileMenu").classList.remove("active");
        document.getElementById("mobileOverlay").classList.remove("active");
        document.getElementById("hamburgerBtn").classList.remove("active");
        setTimeout(() => openEnquiryModal(), 200);
    }

    /* Enquiry Modal */
    function openEnquiryModal() {
        document.getElementById("enquiryModal").classList.add("show");
    }
    function closeEnquiryModal() {
        document.getElementById("enquiryModal").classList.remove("show");
    }
    function backdropClose(e) {
        if (e.target.id === "enquiryModal") closeEnquiryModal();
    }
    function submitEnquiry(e) {
        e.preventDefault();
        const form = document.getElementById("enquiryForm");
        const data = new FormData(form);
        const whatsappMsg = encodeURIComponent(
            `Hello, I submitted an enquiry on MT Animal Care.\n\n` +
            `Animal: ${data.get("animalType")}\n` +
            `Number of Animals: ${data.get("animalCount")}\n` +
            `Monthly Requirement: ${data.get("monthlyRequirement")}\n` +
            `Requirement: ${data.get("requirement")}\n` +
            `Name: ${data.get("name")}\n` +
            `Contact: ${data.get("phone")}`
        );
        const whatsappNumber = "919021466362";
        fetch("/enquiry", { method: "POST", body: data }).catch(() => {});
        alert("‚úÖ Your enquiry has been sent.\nüëâ Chat instantly with our expert on WhatsApp.");
        window.open(`https://wa.me/${whatsappNumber}?text=${whatsappMsg}`, "_blank");
        form.reset();
        closeEnquiryModal();
    }

    /* Chatbot minimize */
    let chatbotMinimized = false;
    function toggleChatbot() {
        const body = document.getElementById("ai-body");
        const input = document.getElementById("ai-input");
        chatbotMinimized = !chatbotMinimized;
        body.style.display = chatbotMinimized ? "none" : "block";
        input.style.display = chatbotMinimized ? "none" : "block";
    }

    /* DOMContentLoaded */
    document.addEventListener("DOMContentLoaded", function () {
        /* Auto enquiry popup once per session */
        if (!sessionStorage.getItem("enquiryShown")) {
            setTimeout(() => { openEnquiryModal(); sessionStorage.setItem("enquiryShown", "true"); }, 1200);
        }

        /* Floating button position handled by CSS calc(var(--nav-h) + 16px) */

        /* ---- CHATBOT ---- */
        const aiBody = document.getElementById("ai-body");
        const aiInput = document.getElementById("ai-input");
        const chatbot = document.getElementById("ai-chatbot");
        const header = document.getElementById("ai-header");

        function escapeHtml(text) {
            return text.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'})[m]);
        }

        aiInput.addEventListener("keydown", function(e) {
            if (e.key === "Enter" && !e.shiftKey) { e.preventDefault(); sendMessage(); }
        });

        function sendMessage() {
            const msg = aiInput.value.trim();
            if (!msg) return;
            aiBody.innerHTML += `<div class="msg-user"><b>You:</b> ${escapeHtml(msg)}</div>`;
            aiInput.value = "";
            const typingEl = document.createElement("div");
            typingEl.className = "typing"; typingEl.innerText = "AI is typing‚Ä¶";
            aiBody.appendChild(typingEl);
            aiBody.scrollTop = aiBody.scrollHeight;
            fetch("/ai-chat", { method: "POST", headers: { "Content-Type": "text/plain" }, body: msg })
                .then(res => res.text())
                .then(reply => {
                    typingEl.remove();
                    aiBody.innerHTML += `<div class="msg-ai"><b>AI:</b> ${escapeHtml(reply)}</div>`;
                    aiBody.scrollTop = aiBody.scrollHeight;
                })
                .catch(() => { typingEl.innerText = "AI is not available right now."; });
        }

        /* Drag */
        let isDragging = false, offsetX = 0, offsetY = 0;
        function startDrag(x, y) {
            const rect = chatbot.getBoundingClientRect();
            offsetX = x - rect.left; offsetY = y - rect.top; isDragging = true;
        }
        function moveDrag(x, y) {
            if (!isDragging) return;
            chatbot.style.left = (x - offsetX) + "px"; chatbot.style.top = (y - offsetY) + "px";
            chatbot.style.right = "auto"; chatbot.style.bottom = "auto"; chatbot.style.position = "fixed";
        }
        function stopDrag() { isDragging = false; }

        header.addEventListener("mousedown", e => { startDrag(e.clientX, e.clientY); e.preventDefault(); });
        document.addEventListener("mousemove", e => moveDrag(e.clientX, e.clientY));
        document.addEventListener("mouseup", stopDrag);
        header.addEventListener("touchstart", e => { const t = e.touches[0]; startDrag(t.clientX, t.clientY); });
        document.addEventListener("touchmove", e => { const t = e.touches[0]; moveDrag(t.clientX, t.clientY); });
        document.addEventListener("touchend", stopDrag);
    });
</script>


    <div id="ai-chatbot">
        <div id="ai-header">
            ü§ñ Ask MT Assistant <span onclick="toggleChatbot()">‚ûñ</span>
        </div>
        <div id="ai-body"></div>
        <input type="text" id="ai-input" placeholder="Ask about products, GST, delivery‚Ä¶"/>
    </div>

    <!-- ============================================================
         ENQUIRY MODAL
    ============================================================ -->
    <div id="enquiryModal" class="enquiry-modal" onclick="backdropClose(event)">
        <div class="enquiry-box">
            <span class="close-btn" onclick="closeEnquiryModal()">‚úñ</span>
            <h2>üì© Custom Enquiry</h2>
            <p>Tell us your requirement and we'll design a custom solution for your animals.</p>
            <form id="enquiryForm" onsubmit="submitEnquiry(event)">
                <label>Animal Type</label>
                <select name="animalType" required>
                    <option value="">Select Animal</option>
                    <option value="Chicken">Chicken</option>
                    <option value="Cow">Cow</option>
                    <option value="Goat">Goat</option>
                    <option value="Pig">Pig</option>
                    <option value="Other">Other</option>
                </select>
                <label>Requirement (Medicine / Supplement)</label>
                <textarea name="requirement" placeholder="Describe the problem or supplement needed‚Ä¶" required></textarea>
                <label>Your Name</label>
                <input type="text" name="name" required/>
                <label>Contact Number</label>
                <input type="tel" name="phone" required/>
                <label>Number of Animals</label>
                <input type="number" name="animalCount" placeholder="e.g. 500" min="1" required/>
                <label>Expected Monthly Requirement</label>
                <input type="text" name="monthlyRequirement" placeholder="e.g. 10 kg / 100 bottles" required/>
                <button type="submit">Send Enquiry ‚Üí</button>
            </form>
        </div>
    </div>

